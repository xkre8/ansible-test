---
- name: "Display user report"
  ansible.builtin.debug:
    msg: |
      
      ðŸŽ¯ === USER CREATION REPORT === ðŸŽ¯
      
      Total users created: {{ processed_users | default([]) | length }}
      
      User Details:
      {% for user in processed_users | default([]) %}
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      ðŸ‘¤ {{ user.name }}{% if user.random_username %} (ðŸŽ² Generated){% endif %}
        â”œâ”€â”€ UID: {{ user.uid }}{% if user.random_uid %} (ðŸŽ² Random){% endif %}
        â”œâ”€â”€ Group: {{ user.group }}
        â”œâ”€â”€ Additional Groups: {{ user.groups | join(', ') if user.groups | length > 0 else 'None' }}
        â”œâ”€â”€ Home: {{ user.home }}
        â”œâ”€â”€ Shell: {{ user.shell }}
        â””â”€â”€ Password: {% if user.random_password %}ðŸŽ² {{ user.password }} (SAVE THIS!){% else %}âœ… User Provided{% endif %}
      
      {% endfor %}
  when: processed_users is defined and processed_users | length > 0